output:
- utility_private_ip:
    value: ${module.utility_vm.utility_private_ip}
- role_id:
    value: ${module.utility_vm.role_id}
---
module:
- utility_vm:
    activation_id: ${var.activation_id}
    ami_account_id: ${var.ami_account_id}
    authorized_keys: ${var.authorized_keys}
    aws_account_id: ${var.aws_account_id}
    bootstrap_path: ${var.bootstrap_path}
    bootstrap_script: ${var.bootstrap_script}
    branch: ${var.branch}
    customer_id: ${var.customer_id}
    environment: ${var.environment}
    extra_vars: ${var.extra_vars}
    image_name_search_criteria: ${var.image_name_search_criteria}
    instance_type: ${var.instance_type}
    organization_name: ${var.organization_name}
    proxy: ${var.proxy}
    source: ../modules/utility-vm
    ssh_key_name: ${var.ssh_key_name}
    user_policy: ${var.user_policy}
    vm_hostname: ${var.vm_hostname}
    vm_name: ${var.vm_name}
    vpc_cidr_list: ${var.vpc_cidr_list}
    vpc_id: ${var.vpc_id}
    vpc_subnet_id: ${var.vpc_subnet_id}
terraform:
- backend:
  - s3:
      encrypt: 'true'
  required_providers:
  - aws:
      source: hashicorp/aws
      version: ~> 5.0
---
variable:
- ami_account_id:
    default: 099720109477
- aws_account_id:
    default: '433568766270'
- aws_region:
    default: us-east-1
- vpc_id:
    default: vpc-e2b51d99
- vpc_subnet_id:
    default: subnet-6127013c
- vpc_cidr_list:
    default:
    - 10.128.0.0/20
    - 54.0.0.0/8
    - 52.0.0.0/8
    type: ${list(string)}
- ssh_key_name: {}
- environment:
    default: CSOC
- instance_type:
    default: t2.micro
- image_name_search_criteria:
    default: ubuntu/images/hvm-ssd/ubuntu-bionic-18.04-amd64-server-*
- extra_vars:
    type: ${list(string)}
- bootstrap_path: {}
- bootstrap_script: {}
- vm_name: {}
- vm_hostname: {}
- proxy:
    default: true
- authorized_keys:
    default: files/authorized_keys/ops_team
- organization_name:
    default: Basic Service
    description: For tagging purposes
- branch:
    default: master
- user_policy:
    default: "{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n     \
      \ \"Action\": [\n        \"logs:PutLogEvents\"\n      ],\n      \"Effect\":\
      \ \"Allow\",\n      \"Resource\": [\"*\"],\n      \"Sid\": \"\"\n    }\n  ]\n\
      }"
- activation_id:
    default: ''
- customer_id:
    default: ''
