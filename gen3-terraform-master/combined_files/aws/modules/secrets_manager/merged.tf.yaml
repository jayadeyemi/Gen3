data:
- aws_caller_identity:
    current: {}
- aws_vpcs:
    vpcs:
      tags:
        Name: ${var.vpc_name}
- aws_security_group:
    private:
      name: local
      vpc_id: ${data.aws_vpc.the_vpc.id}
- aws_vpc:
    the_vpc:
      id: ${data.aws_vpcs.vpcs.ids[0]}
---
resource:
- aws_secretsmanager_secret:
    secret:
      name: ${var.vpc_name}_${var.secret_name}
- aws_secretsmanager_secret_version:
    secret:
      secret_id: ${aws_secretsmanager_secret.secret.id}
      secret_string: ${var.secret}
---
output:
- secret-arn:
    value: ${aws_secretsmanager_secret.secret.arn}
---
variable:
- vpc_name: {}
- secret: {}
- secret_name: {}
