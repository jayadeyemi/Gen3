resource:
- aws_cloudwatch_event_rule:
    event_rule:
      description: ${var.cwe_rule_description}
      event_pattern: ${var.cwe_rule_pattern}
      name: ${var.cwe_rule_name}
- aws_cloudwatch_event_target:
    sns:
      arn: ${var.cwe_target_arn}
      rule: ${aws_cloudwatch_event_rule.event_rule.name}
---
output:
- event_rule:
    value: ${aws_cloudwatch_event_rule.event_rule.name}
- event_arn:
    value: ${aws_cloudwatch_event_rule.event_rule.arn}
---
variable:
- cwe_rule_name:
    description: Name of the rule
- cwe_rule_description:
    default: ''
    description: Brief description of the rule to use
- cwe_rule_pattern:
    default: ''
    description: Patter that the rule will use
- cwe_target_id:
    default: ''
    description: ID or name to use, if empty, something randon will be used
- cwe_target_arn:
    description: ARN of the target that this event will trigger
