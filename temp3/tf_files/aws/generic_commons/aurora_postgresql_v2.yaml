---
module:
  aurora_postgresql_v2:
    source: terraform-aws-modules/rds-aurora/aws
    name: ${var.vpc_name}-postgres-cluster
    engine: ${data.aws_rds_engine_version.postgresql.engine}
    engine_mode: provisioned
    engine_version: ${data.aws_rds_engine_version.postgresql.version}
    storage_encrypted: true
    master_username: postgres
    master_password: ${random_password.master.result}
    manage_master_user_password: false
    vpc_id: ${module.vpc.vpc_id}
    db_subnet_group_name: ${aws_db_subnet_group.database.name}
    security_group_rules:
      vpc_ingress:
        cidr_blocks: ${module.vpc.private_subnets_cidr_blocks}
    monitoring_interval: 60
    apply_immediately: true
    skip_final_snapshot: true
    serverlessv2_scaling_configuration:
      min_capacity: 1
      max_capacity: 10
    instance_class: db.serverless
    instances:
      one: {}
    tags: ${local.tags}
