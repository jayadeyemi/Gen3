---
variable:
  - vpc_name:
    default: Commons1
  - iam_role_name:
    default: csoc_adminvm
  - vpc_cidr_block:
    default: 172.24.17.0/20
  - vpc_flow_logs:
    default: false
  - vpc_flow_traffic:
    default: ALL
  - aws_region:
    default: us-east-1
  - aws_cert_name:
    default: AWS-CERTIFICATE-NAME
  - csoc_account_id:
    default: '433568766270'
  - peering_cidr:
    default: 10.128.0.0/20
  - fence_db_size:
    default: 10
  - sheepdog_db_size:
    default: 10
  - indexd_db_size:
    default: 10
  - db_password_fence:
    default: ''
    sensitive: true
  - db_password_peregrine:
    default: ''
    sensitive: true
  - db_password_sheepdog:
    default: ''
    sensitive: true
  - db_password_indexd:
    default: ''
    sensitive: true
  - portal_app:
    default: dev
  - fence_snapshot:
    default: ''
  - peregrine_snapshot:
    default: ''
  - sheepdog_snapshot:
    default: ''
  - indexd_snapshot:
    default: ''
  - fence_db_instance:
    default: db.t3.small
  - sheepdog_db_instance:
    default: db.t3.small
  - indexd_db_instance:
    default: db.t3.small
  - hostname:
    default: dev.bionimbus.org
  - kube_ssh_key:
    default: ''
  - kube_additional_keys:
    default: ''
  - hmac_encryption_key:
    default: ''
    sensitive: true
  - sheepdog_secret_key:
    default: ''
    sensitive: true
  - sheepdog_indexd_password:
    default: ''
    sensitive: true
  - sheepdog_oauth2_client_id:
    default: ''
    sensitive: true
  - config_folder:
    default: dev
  - sheepdog_oauth2_client_secret:
    default: ''
    sensitive: true
  - ami_account_id:
    default: '137112412989'
  - squid_image_search_criteria:
    description: Search criteria for squid AMI look up
    default: al2023-ami-*
  - peering_vpc_id:
    default: vpc-e2b51d99
  - squid-nlb-endpointservice-name:
    default: com.amazonaws.vpce.us-east-1.vpce-svc-0ce2261f708539011
  - slack_webhook:
    default: ''
    sensitive: true
  - secondary_slack_webhook:
    default: ''
    sensitive: true
  - alarm_threshold:
    default: '85'
  - csoc_managed:
    default: false
  - csoc_peering:
    default: false
  - mailgun_api_key:
    default: ''
  - mailgun_smtp_host:
    default: smtp.mailgun.org
  - mailgun_api_url:
    default: https://api.mailgun.net/v3/
  - fence_ha:
    default: false
  - sheepdog_ha:
    default: false
  - indexd_ha:
    default: false
  - fence_maintenance_window:
    default: SAT:09:00-SAT:09:59
  - sheepdog_maintenance_window:
    default: SAT:10:00-SAT:10:59
  - indexd_maintenance_window:
    default: SAT:11:00-SAT:11:59
  - fence_backup_retention_period:
    default: '4'
  - sheepdog_backup_retention_period:
    default: '4'
  - indexd_backup_retention_period:
    default: '4'
  - fence_backup_window:
    default: 06:00-06:59
  - sheepdog_backup_window:
    default: 07:00-07:59
  - indexd_backup_window:
    default: 08:00-08:59
  - engine_version:
    default: '13'
  - fence_auto_minor_version_upgrade:
    default: 'true'
  - indexd_auto_minor_version_upgrade:
    default: 'true'
  - sheepdog_auto_minor_version_upgrade:
    default: 'true'
  - users_bucket_name:
    default: cdis-gen3-users
  - fence_database_name:
    default: fence
  - sheepdog_database_name:
    default: gdcapi
  - indexd_database_name:
    default: indexd
  - fence_db_username:
    default: fence_user
  - sheepdog_db_username:
    default: sheepdog
  - indexd_db_username:
    default: indexd_user
  - fence_allow_major_version_upgrade:
    default: 'true'
  - sheepdog_allow_major_version_upgrade:
    default: 'true'
  - indexd_allow_major_version_upgrade:
    default: 'true'
  - ha-squid_instance_type:
    description: Instance type for HA squid
    default: t3.medium
  - ha-squid_instance_drive_size:
    description: Volume size for HA squid instances
    default: 25
  - deploy_single_proxy:
    description: Single instance plus HA
    default: true
  - ha-squid_bootstrap_script:
    description: Bootstrapt script for ha-squid instances
    default: squid_running_on_docker.sh
  - ha-squid_extra_vars:
    type: ${list(string)}
    description: additional variables to pass along with the bootstrapscript
    default:
      - squid_image=master
  - branch:
    description: For testing purposes, when something else than the master
    default: master
  - fence-bot_bucket_access_arns:
    description: When fence bot has to access another bucket that wasn't created by the VPC module
    default: []
  - deploy_ha_squid:
    description: Should you want to deploy HA-squid
    default: false
  - ha-squid_cluster_desired_capasity:
    description: If ha squid is enabled and you want to set your own capasity
    default: 2
  - ha-squid_cluster_min_size:
    description: If ha squid is enabled and you want to set your own min size
    default: 1
  - ha-squid_cluster_max_size:
    description: If ha squid is enabled and you want to set your own max size
    default: 3
  - deploy_sheepdog_db:
    description: Whether or not to deploy the database instance
    default: true
  - deploy_fence_db:
    description: Whether or not to deploy the database instance
    default: true
  - deploy_indexd_db:
    description: Whether or not to deploy the database instance
    default: true
  - single_squid_instance_type:
    description: Instance type for the single proxy instance
    default: t2.micro
  - network_expansion:
    description: Let k8s workers be on a /22 subnet per AZ
    default: false
  - rds_instance_storage_encrypted:
    default: true
  - fence_max_allocated_storage:
    description: Maximum allocated storage for autosacaling
    default: 0
  - sheepdog_max_allocated_storage:
    description: Maximum allocated storage for autosacaling
    default: 0
  - indexd_max_allocated_storage:
    description: Maximum allocated storage for autosacaling
    default: 0
  - activation_id:
    default: ''
    sensitive: true
  - customer_id:
    default: ''
    sensitive: true
  - fips:
    default: false
  - ignore_fence_changes:
    default:
      - engine_version
      - storage_encrypted
      - identifier
  - ignore_sheepdog_changes:
    default:
      - engine_version
      - storage_encrypted
      - identifier
  - ignore_indexd_changes:
    default:
      - engine_version
      - storage_encrypted
      - identifier
  - prevent_fence_destroy:
    default: true
  - prevent_sheepdog_destroy:
    default: true
  - prevent_indexd_destroy:
    default: true
  - deploy_alarms:
    default: true
  - deploy_argocd:
    default: true
  - argocd_version:
    default: 7.8.2
  - deploy_external_secrets_operator:
    default: true
  - external_secrets_operator_version:
    default: 0.14.0
  - ec2_keyname:
    default: someone@uchicago.edu
  - instance_type:
    default: t3.large
  - jupyter_instance_type:
    default: t3.large
  - workflow_instance_type:
    default: t3.2xlarge
  - secondary_cidr_block:
    default: ''
  - users_policy: {}
  - worker_drive_size:
    default: 30
  - eks_version:
    default: '1.31'
  - workers_subnet_size:
    default: 24
  - bootstrap_script:
    default: bootstrap-with-security-updates.sh
  - jupyter_bootstrap_script:
    default: bootstrap-with-security-updates.sh
  - kernel:
    default: N/A
  - jupyter_worker_drive_size:
    default: 30
  - workflow_bootstrap_script:
    default: bootstrap.sh
  - workflow_worker_drive_size:
    default: 30
  - cidrs_to_route_to_gw:
    default: []
  - organization_name:
    default: Basic Services
  - jupyter_asg_desired_capacity:
    default: 0
  - jupyter_asg_max_size:
    default: 10
  - jupyter_asg_min_size:
    default: 0
  - workflow_asg_desired_capacity:
    default: 0
  - workflow_asg_max_size:
    default: 50
  - workflow_asg_min_size:
    default: 0
  - iam-serviceaccount:
    default: true
  - domain_test:
    description: url for the lambda function to check for the proxy
    default: www.google.com
  - deploy_workflow:
    description: Deploy workflow nodepool?
    default: false
  - secondary_availability_zones:
    description: AZ to be used by EKS nodes in the secondary subnet
    default:
      - us-east-1a
      - us-east-1b
      - us-east-1c
      - us-east-1d
  - deploy_jupyter:
    description: Deploy workflow nodepool?
    default: true
  - dual_proxy:
    description: Single instance and HA
    default: false
  - single_az_for_jupyter:
    description: Jupyter notebooks on a single AZ
    default: false
  - oidc_eks_thumbprint:
    description: Thumbprint for the AWS OIDC identity provider
    default:
      - 9e99a48a9960b14926bb7f3b02e22da2b0ab7280
  - sns_topic_arn:
    description: SNS topic ARN for alerts
    default: arn:aws:sns:us-east-1:433568766270:planx-csoc-alerts-topic
  - fips_ami_kms:
    default: arn:aws:kms:us-east-1:707767160287:key/mrk-697897f040ef45b0aa3cebf38a916f99
  - fips_enabled_ami:
    default: ami-0de87e3680dcb13ec
  - availability_zones:
    description: AZ to be used by EKS nodes
    default:
      - us-east-1a
      - us-east-1c
      - us-east-1d
  - deploy_eks:
    default: true
  - deploy_es:
    default: true
  - es_name:
    default: ''
  - ebs_volume_size_gb:
    default: 20
  - encryption:
    default: 'true'
  - es_instance_type:
    default: m4.large.elasticsearch
  - es_instance_count:
    default: 3
  - es_version:
    description: What version to use when deploying ES
    default: '6.8'
  - es_linked_role:
    description: Whether or no to deploy a linked roll for ES
    default: true
  - spot_linked_role:
    default: false
  - cluster_identifier:
    description: Cluster Identifier
    type: string
    default: aurora-cluster
  - cluster_instance_identifier:
    description: Cluster Instance Identifier
    type: string
    default: aurora-cluster-instance
  - cluster_instance_class:
    description: Cluster Instance Class
    type: string
    default: db.serverless
  - cluster_engine:
    description: Aurora database engine type
    type: string
    default: aurora-postgresql
  - cluster_engine_version:
    description: Aurora database engine version.
    type: string
    default: '13.7'
  - master_username:
    description: Master DB username
    type: string
    default: postgres
  - storage_encrypted:
    description: Specifies whether storage encryption is enabled
    type: bool
    default: true
  - apply_immediate:
    description: Instruct the service to apply the change immediately. This can result in a brief downtime as the server reboots. See the AWS Docs on RDS Maintenance for more information
    type: bool
    default: true
  - engine_mode:
    type: string
    description: use provisioned for Serverless v2 RDS cluster
    default: provisioned
  - serverlessv2_scaling_min_capacity:
    type: string
    description: Serverless v2 RDS cluster minimum scaling capacity in ACUs
    default: '0.5'
  - serverlessv2_scaling_max_capacity:
    type: string
    description: Serverless v2 RDS cluster maximum scaling capacity in ACUs
    default: '10.0'
  - skip_final_snapshot:
    description: Determines whether a final DB snapshot is created before the DB cluster is deleted
    type: bool
    default: false
  - final_snapshot_identifier:
    type: string
    description: The name of your final DB snapshot when this DB cluster is deleted
    default: aurora-cluster-snapshot-final
  - backup_retention_period:
    type: number
    description: The days to retain backups for
    default: 10
  - preferred_backup_window:
    description: The daily time range during which automated backups are created if automated backups are enabled using the BackupRetentionPeriod parameter
    type: string
    default: 02:00-03:00
  - password_length:
    type: number
    description: The length of the password string
    default: 32
  - db_kms_key_id:
    default: ''
  - deploy_aurora:
    default: false
  - deploy_rds:
    default: true
  - use_asg:
    default: true
  - use_karpenter:
    default: false
  - deploy_karpenter_in_k8s:
    default: false
    description: Allows you to enable the Karpenter Helm chart and associated resources without deploying the other parts of karpenter (i.e. the roles, permissions, and SQS queue)
  - karpenter_version:
    default: v0.32.9
  - deploy_cloud_trail:
    default: true
  - send_logs_to_csoc:
    default: true
  - route_table_name:
    default: eks_private
  - eks_public_access:
    default: 'true'
  - deploy_gen3:
    default: false
  - ambassador_enabled:
    description: Enable ambassador
    type: bool
    default: true
  - arborist_enabled:
    description: Enable arborist
    type: bool
    default: true
  - argo_enabled:
    description: Enable argo
    type: bool
    default: true
  - audit_enabled:
    description: Enable audit
    type: bool
    default: true
  - aws-es-proxy_enabled:
    description: Enable aws-es-proxy
    type: bool
    default: true
  - dbgap_enabled:
    description: Enable dbgap sync in the usersync job
    type: bool
    default: false
  - dd_enabled:
    description: Enable datadog
    type: bool
    default: false
  - dictionary_url:
    description: URL to the data dictionary
    default: ''
  - dispatcher_job_number:
    description: Number of dispatcher jobs
    default: 10
  - fence_enabled:
    description: Enable fence
    type: bool
    default: true
  - guppy_enabled:
    description: Enable guppy
    type: bool
    default: true
  - hatchery_enabled:
    description: Enable hatchery
    type: bool
    default: true
  - indexd_enabled:
    description: Enable indexd
    type: bool
    default: true
  - indexd_prefix:
    description: Indexd prefix
    default: dg.XXXX/
  - ingress_enabled:
    description: Create ALB ingress
    type: bool
    default: true
  - manifestservice_enabled:
    description: Enable manfiestservice
    type: bool
    default: true
  - metadata_enabled:
    description: Enable metadata
    type: bool
    default: true
  - netpolicy_enabled:
    description: Enable network policy security rules
    type: bool
    default: false
  - peregrine_enabled:
    description: Enable perergrine
    type: bool
    default: true
  - pidgin_enabled:
    description: Enable pidgin
    type: bool
    default: true
  - portal_enabled:
    description: Enable portal
    type: bool
    default: true
  - public_datasets:
    description: whether the datasets are public
    type: bool
    default: false
  - requestor_enabled:
    description: Enable requestor
    type: bool
    default: true
  - revproxy_arn:
    description: ARN for the revproxy cert in ACM
    default: ''
  - revproxy_enabled:
    description: Enable revproxy
    type: bool
    default: true
  - sheepdog_enabled:
    description: Enable sheepdog
    type: bool
    default: true
  - slack_send_dbgap:
    description: Enable slack message for usersync job
    type: bool
    default: false
  - ssjdispatcher_enabled:
    description: Enable ssjdispatcher
    type: bool
    default: true
  - tier_access_level:
    description: Tier access level for guppy
    default: private
  - tier_access_limit:
    description: value for tier access limit
    default: '100'
  - usersync_enabled:
    description: Enable usersync cronjob
    type: bool
    default: true
  - usersync_schedule:
    description: Cronjob schedule for usersync
    default: '*/30 * * * *'
  - useryaml_s3_path:
    description: S3 path to the user.yaml file
    default: https://s3.amazonaws.com/dictionary-artifacts/datadictionary/develop/schema.json
  - wts_enabled:
    description: Enable wts
    type: bool
    default: true
  - fence_config_path:
    default: ''
  - useryaml_path:
    default: ''
  - gitops_path:
    default: https://github.com/uc-cdis/cdis-manifest.git
  - google_client_id:
    default: ''
    sensitive: true
  - google_client_secret:
    default: ''
    sensitive: true
  - fence_access_key:
    default: ''
    sensitive: true
  - fence_secret_key:
    default: ''
    sensitive: true
  - upload_bucket:
    default: ''
  - namespace:
    default: default
  - secrets_manager_enabled:
    default: false
  - ci_run:
    default: false
  - commons_log_retention:
    description: value in days for the cloudwatch log retention period
    default: '3653'
  - enable_vpc_endpoints:
    default: true
  - deploy_es_role:
    default: false
  - deploy_waf:
    default: false
  - k8s_bootstrap_resources:
    default: true
    description: If set to true, creates resources for bootstrapping a kubernetes cluster (such as karpenter configs and helm releases)
  - base_rules:
    description: Base AWS Managed Rules
    type: '${list(object({"managed_rule_group_name": "string", "priority": "number", "override_to_count": "${list(string)}"}))}'
    default:
      - managed_rule_group_name: AWSManagedRulesAmazonIpReputationList
      priority: 0
      override_to_count:
        - AWSManagedReconnaissanceList
      - managed_rule_group_name: AWSManagedRulesPHPRuleSet
      priority: 1
      override_to_count:
        - PHPHighRiskMethodsVariables_HEADER
        - PHPHighRiskMethodsVariables_QUERYSTRING
        - PHPHighRiskMethodsVariables_BODY
      - managed_rule_group_name: AWSManagedRulesWordPressRuleSet
      priority: 2
      override_to_count:
        - WordPressExploitableCommands_QUERYSTRING
        - WordPressExploitablePaths_URIPATH
  - additional_rules:
    description: Additional AWS Managed Rules
    type: '${list(object({"managed_rule_group_name": "string", "priority": "number", "override_to_count": "${list(string)}"}))}'
    default: []
