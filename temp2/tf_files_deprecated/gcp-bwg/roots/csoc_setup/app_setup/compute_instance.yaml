---
module:
  - compute_instance:
    source: ../../../modules/compute-no-public-ip
    project: ${data.terraform_remote_state.org_setup.project_id}
    count_compute: ${var.count_compute}
    instance_name: ${var.instance_name}
    region: ${var.region}
    environment: ${var.environment}
    subnetwork_name: ${data.terraform_remote_state.project_setup.subnetwork_self_link_csoc_private.0}
    compute_tags:
      - ${data.terraform_remote_state.project_setup.firewall-csoc-private-inbound-ssh-target-tags}
      - ${data.terraform_remote_state.project_setup.firewall-csoc-private-outbound-ssh-target-tags}
      - ${data.terraform_remote_state.project_setup.firewall-csoc-private-outbound-proxy-target-tags}
      - ${data.terraform_remote_state.project_setup.firewall-csoc-private-inboud-gke-target-tags}
      - ${data.terraform_remote_state.project_setup.firewall-csoc-private-outbound-gke-target-tags}
    compute_labels: ${var.compute_labels}
    scopes: ${var.scopes}
    ssh_user: ${var.ssh_user}
    ssh_key_pub: ${var.ssh_key_pub}
    ssh_key: ${var.ssh_key}
    image_name: ${var.image_name}
