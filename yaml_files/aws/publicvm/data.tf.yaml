data:
- aws_ami:
    ubuntu:
      most_recent: true
      owners:
      - 099720109477
      filter:
      - name: name
        values:
        - ubuntu/images/hvm-ssd/ubuntu-bionic-18.04-amd64-server-*
      - name: virtualization-type
        values:
        - hvm
- aws_vpc:
    vpc:
      filter:
      - name: tag:Name
        values:
        - ${var.vpc_name}
- aws_subnet:
    public:
      vpc_id: ${data.aws_vpc.vpc.id}
      filter:
      - name: tag:Name
        values:
        - ${var.subnet_name}
- aws_security_group:
    ssh_in:
      filter:
      - name: group-name
        values:
        - ${var.ssh_in_secgroup}
      vpc_id: ${data.aws_vpc.vpc.id}
- aws_security_group:
    egress:
      vpc_id: ${data.aws_vpc.vpc.id}
      filter:
      - name: group-name
        values:
        - ${var.egress_secgroup}
